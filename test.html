<!DOCTYPE html>
<html>
  <head></head>
  <body>
    <script src="dist/frzr-dev.js"></script>
    <script>
      var model = frzr.model.extend({
        render: function (item) {
          this.$el.textContent = item.name
        },
        template: '<div class="test"></div>',
        update: function (item, oldItem) {
          var parent = collection.get(item.parent)
          parent && (this.parent = parent)
        }
      })
      var collection = frzr.collection({
        key: '_id',
        index: 'parent',
        model: model
      })
      collection.mount(document.body)
      collection.on('init', function (id, data, oldData) {
        var model = this
      })
      collection.on('update', function (id, data, oldData) {
        var model = this
      })
      collection.on('remove', function (id, data) {
        var model = this
      })
      collection.reset([
        {_id: 1, name: 'Title 1'},
        {_id: 2, name: 'Title 2', parent: 1},
        {_id: 3, name: 'Title 3', parent: 1},
        {_id: 4, name: 'Title 4', parent: 2}
      ])
      setTimeout(function () {
        collection.reset([
          {_id: 2, name: 'Title 2'},
          {_id: 4, name: 'Title 4', parent: 2},
          {_id: 3, name: 'Title 3', parent: 2}
        ])
      }, 1000)
    </script>
  </body>
</html>
