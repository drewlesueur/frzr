(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.frzr=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";module.exports=function(e,t,o){Object.defineProperty(e,t,{value:o})}},{}],2:[function(require,module,exports){"use strict";function each(e,t){for(var c=e.length,o=0;c>o;o++)t(e[o],o)}module.exports=each},{}],3:[function(require,module,exports){"use strict";function eachReverse(e,r){for(var s=e.length,t=s;t;t--)r(e[t-1],t-1)}module.exports=eachReverse},{}],4:[function(require,module,exports){"use strict";var frzr={tags:{}};module.exports=frzr,frzr.defProperty=require(1),frzr.each=require(2),frzr.eachReverse=require(3),frzr.observable=require(10),frzr.inherits=require(11),frzr.tag=require(9),frzr.mount=require(5),frzr.mountAll=require(6),frzr.parse=require(7),frzr.render=require(8),frzr.observable.prototype.one=frzr.observable.prototype.once,frzr.observable.prototype.trigger=frzr.observable.prototype.emit},{1:1,10:10,11:11,2:2,3:3,5:5,6:6,7:7,8:8,9:9}],5:[function(require,module,exports){"use strict";function mount(r,t,o){var n=new Tag(frzr.tags[t],r,o);return n}function Tag(r,t,o){var n=this,e=n instanceof Tag;if(!e)return new Tag(r,t,o);var u=r.tmpl.cloneNode(!0);n.$root=t,n.$el=u;for(var i in o)n[i]=o[i];r.constructor.call(n),frzr.render(function(){t&&(t.appendChild(u),n.trigger("mount"),n.$mounted=!0)})}var frzr=require(4);module.exports=mount,frzr.inherits(Tag,frzr.observable);var proto=Tag.prototype;proto.$find=function(r){return this.$el.querySelector(r)},proto.$findAll=function(r){return this.$el.querySelectorAll(r)},proto.update=function(r){var t=this;t.trigger("update",t);var r=r||{};for(var o in r)t[o]=r[o];t.trigger("updated",t)},proto.mount=function(r,t,o){var n=this,e=frzr.mount(r,t,o);return e.$parent=n,e},proto.mountAll=function(r,t,o){var n=this,e=frzr.mountAll(r,t,o);return e.$parent=n,e},proto.unmount=function(){var r=this;r.trigger("unmount"),r.off(),r.$root.removeChild(r.$el)}},{4:4}],6:[function(require,module,exports){"use strict";function mountAll(e,r,t){return Tags(t,e,r)}function Tags(e,r,t){var o=this,n=o instanceof Tags;return n?(o.$root="string"==typeof r?document.querySelector(r):r,o.$tags=[],o.$rendered=[],o.$items=e,o.$tagName=t,o.$uid=1,o.$posLookup={},void o.update()):new Tags(e,r,t)}var frzr=require(4);module.exports=mountAll,frzr.inherits(Tags,frzr.observable);var proto=Tags.prototype;proto.update=function(e){var r,t,o,n=this,a=n.$posLookup;e&&(n.$items=e),n.trigger("update",n.$items),frzr.render(function(){o=a,a=n.$posLookup={};n.$root.parentNode;n.trigger("render"),frzr.each(n.$items,function(e,r){e.$id||(frzr.defProperty(e,"$id",n.$uid),n.$uid++),a[e.$id]=r}),frzr.eachReverse(n.$rendered,function(e,r){var t=a[e.$id]||-1;if(!~t){n.$rootParent&&!n.$updating&&(n.$updating=!0,n.$placeholder=document.createComment(""),n.$rootParent.replaceChild(n.$placeholder,n.$root)),delete o[e.$id];var d=n.$tags.splice(r,1)[0];n.$rendered.splice(r,1),d.unmount()}}),frzr.each(n.$items,function(e,a){var d=o[e.$id]||-1;if(~d)if(a!==d){var $=n.$tags[a],i=n.$tags.splice(d,1)[0];n.$rootParent&&!n.$updating&&(n.$updating=!0,n.$placeholder=document.createComment(""),n.$rootParent.replaceChild(n.$placeholder,n.$root)),r||(r=document.createDocumentFragment(),t=document.createComment(""),n.$root.insertBefore(t,$.$el),n.$updating=!0),r.appendChild(i.$el),n.$rendered.splice(a,0,n.$rendered.splice(d,1)[0]),n.$tags.splice(a,0,i)}else r&&(t?(n.$root.replaceChild(r,t),t=void 0):n.$root.insertBefore(r,n.$tags[a].$el),r=void 0);else{n.$rootParent&&!n.$updating&&(n.$updating=!0,n.$placeholder=document.createComment(""),n.$rootParent.replaceChild(n.$placeholder,n.$root)),r||(r=document.createDocumentFragment(),n.$updating=!0);var $=frzr.mount(void 0,n.$tagName,e);$.$parent=n,$.$item=e,r.appendChild($.$el),$.$root=n.$root,n.$rendered.splice(a,0,e),n.$tags.splice(a,0,$)}}),r&&(t?n.$root.replaceChild(r,t):n.$root.appendChild(r),r=void 0),n.$rootParent&&n.$updating&&(n.$updating=!1,n.$placeholder?n.$rootParent.replaceChild(n.$root,n.$placeholder):n.$rootParent.appendChild(n.$root))}),frzr.render(function(){n.trigger("rendered")}),n.trigger("updated",n.$items)},proto.unmount=function(){self.update([]),self.trigger("unmount"),self.off()}},{4:4}],7:[function(require,module,exports){"use strict";function parse(r){return String(r.innerHTML).trim()}module.exports=parse},{}],8:[function(require,module,exports){"use strict";function needRender(){rendering=requestAnimationFrame(function(){rendering=void 0;var e=actions.splice(0,actions.length);frzr.each(e,function(e){e()})})}var frzr=require(4),rendering,actions=[],callbacks=[];module.exports=function(e){actions.push(e),!rendering&&needRender()}},{4:4}],9:[function(require,module,exports){"use strict";function Tag(e,r,t){var n=document.createElement("div");n.innerHTML=r,frzr.tags[e]={constructor:t,tmpl:n.removeChild(n.childNodes[0])}}var frzr=require(4),render=require(8);module.exports=Tag},{4:4,8:8}],10:[function(require,module,exports){function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],11:[function(require,module,exports){module.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}},{}]},{},[4])(4)});
